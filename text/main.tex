% See http://tex.stackexchange.com/questions/95334/how-can-i-set-the-final-option-for-the-graphicx-package-in-xetex
\PassOptionsToPackage{final}{graphicx}
\PassOptionsToPackage{final}{hyperref}
%\documentclass[draft,twoside]{book}
\documentclass[final,twoside]{book}

\input{src/Preamble}
\input{src/PreambleLhs}
\input{src/Macros}
\input{src/Modularity/Macros}

\begin{document}

% Must be before titlepage so that the empty page after the titlepage gets a Roman page number.
\frontmatter

% This is an extremely useful command that you searched for quite some time, therefore do not delete this comment.
%\layout

\input{src/Titlepage}
\input{src/Acknowledgements}

\tableofcontents

\mainmatter

\input{src/Introduction}


%% The 7 depths defined in latex
%% \part{''part''}                   -1  not in letters
%% \chapter{''chapter''}             0   only books and reports
%% \section{''section''}             1   not in letters
%% \subsection{''subsection''}       2   not in letters
%% \subsubsection{''subsubsection''} 3   not in letters
%% \paragraph{''paragraph''}         4   not in letters
%% \subparagraph{''subparagraph''}   5   not in letters


%% Meta-theory, natural deduction, operational semantics, type systems,
%% type-safety, mechanization, datatype generic programming
\part{Modularity}

\chapter{Background}
\input{src/Modularity/Abstract}
\section{Modular definitions}
\input{src/Modularity/Introduction}
\section{Expression problem}
\section{Datatypes \`a la Carte}
\section{Church encodings}
\section{Metatheory \`a la Carte}

\chapter{Modular predicative universes}
\input{src/Modularity/Functors}
\input{src/Modularity/Containers}
\input{src/Modularity/Polynomial}
\input{src/Modularity/CaseStudy}
\input{src/Modularity/RelatedWork}
\input{src/Modularity/Conclusion}

\chapter{Modular monadic effects}



\input{src/Conclusion}

\backmatter

% Summary in English
\chapter{Summary}
\input{summaries/english.tex}

% Summary in Dutch
\begin{otherlanguage}{dutch}
\chapter{Nederlandstalige samenvatting}
\input{summaries/dutch.tex}
\end{otherlanguage}

% Bibliography settings
\bibliographystyle{plain}
% Keeping stuff in separate bibliograhy files is not convenient, as we often have duplicate entries.
\bibliography{Bibliography}

% Order taken from Michaels book
\listoffigures
\listoftables

% Fix hyperref displaying/jumping to wrong page number for index: that of the list of tables.
% See http://tex.stackexchange.com/questions/138903/wrong-hyperref-for-index-in-tableofcontents-since-texlive-2010
% It now does not jump exactly to the title, but at least to the first index entry.
\clearpage
\phantomsection
% Index, this is the very last thing in Michaels thesis book.
\printindex

\end{document}
